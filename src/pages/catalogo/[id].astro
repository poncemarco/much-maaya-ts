---
import { fetchItems } from '../../services/items';
import Layout from "../../layouts/Layout.astro";
import CardCatalog from '../../components/CardCatalog';

export async function getStaticPaths() {
    const items = await fetchItems()
    return items.map((item) => {
        return {
            params: { id: item.id },
            props: { item }
        };
    });
}

const { id } = Astro.params;
const { item } = Astro.props;

const title = item?.name || 'Item';

---

<Layout title={title}>
  <article>
    <div class="container">
      <CardCatalog client:visible
      id={id}
      name={item?.name}
      price={item?.price}
      unit={item?.unit}
      image={item?.image}
      category={item?.category}
    />
    </div>
  </article>
</Layout>