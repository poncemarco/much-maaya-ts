---
import { fetchItem, fetchItems } from '../../services/items'
import Layout from "../../layouts/Layout.astro";
import { type Datum } from "../../types/api";

const { id } = Astro.params
let item: Datum | null = null

if(id) {
  item = await fetchItem({id})
}

export async function getStaticPaths() {
    const items = await fetchItems()

    return items.map(item => ({
        params: {
            id: item.id
        },
    }))
}

---

<Layout title="Page Title">
  <article>
    <h1>{item?.name}</h1>
    <p>{item?.description}</p>
  </article>
</Layout>